<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì‹œê°„ì˜ ê°ì˜¥ - ì§€í•˜ 25ì¸µ íƒˆì¶œ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #0a0a0f;
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(120, 0, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(0, 255, 200, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(255, 0, 128, 0.05) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: linear-gradient(145deg, rgba(20, 20, 35, 0.95), rgba(10, 10, 20, 0.98));
            border: 2px solid transparent;
            border-image: linear-gradient(135deg, #00ffc8, #7b2fff, #ff0080) 1;
            border-radius: 20px;
            box-shadow: 
                0 0 60px rgba(123, 47, 255, 0.3),
                0 0 100px rgba(0, 255, 200, 0.1),
                inset 0 0 60px rgba(0, 0, 0, 0.5);
            padding: 35px;
            position: relative;
            z-index: 1;
        }

        .container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #00ffc8, #7b2fff, #ff0080, #00ffc8);
            border-radius: 22px;
            z-index: -1;
            animation: borderGlow 3s linear infinite;
            background-size: 300% 300%;
        }

        .container::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, rgba(20, 20, 35, 0.98), rgba(10, 10, 20, 0.99));
            border-radius: 18px;
            z-index: -1;
        }

        @keyframes borderGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .floor-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 3em;
            font-weight: 900;
            background: linear-gradient(135deg, #00ffc8, #7b2fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0, 255, 200, 0.5);
            margin-bottom: 8px;
            letter-spacing: 4px;
            filter: drop-shadow(0 0 20px rgba(123, 47, 255, 0.5));
        }

        .era-display {
            font-size: 1.1em;
            color: #a0a0b0;
            margin-bottom: 15px;
            letter-spacing: 2px;
        }

        .timer-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5em;
            color: #00ffc8;
            text-shadow: 0 0 15px rgba(0, 255, 200, 0.7);
            margin-bottom: 15px;
        }

        .stats-row {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(123, 47, 255, 0.1);
            border: 1px solid rgba(123, 47, 255, 0.3);
            border-radius: 20px;
        }

        .stat-label {
            color: #a0a0b0;
            font-size: 0.9em;
        }

        .stat-value {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            color: #ff0080;
        }

        .progress-container {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
            border: 1px solid rgba(123, 47, 255, 0.3);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #7b2fff 0%, #00ffc8 50%, #ff0080 100%);
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 20px rgba(0, 255, 200, 0.6);
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .story-box {
            background: rgba(123, 47, 255, 0.05);
            border: 1px solid rgba(123, 47, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            line-height: 1.9;
            font-size: 1.05em;
            color: #d0d0e0;
        }

        .question {
            font-size: 1.25em;
            font-weight: 700;
            background: linear-gradient(135deg, #ffffff, #00ffc8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            text-align: center;
            line-height: 1.6;
        }

        .choices {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .choice-btn {
            background: linear-gradient(135deg, rgba(123, 47, 255, 0.1), rgba(0, 255, 200, 0.05));
            border: 1px solid rgba(123, 47, 255, 0.3);
            color: #ffffff;
            padding: 18px 25px;
            font-size: 1.05em;
            cursor: pointer;
            border-radius: 12px;
            transition: all 0.15s ease-out;
            text-align: left;
            font-family: inherit;
            position: relative;
            overflow: hidden;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        @media (hover: hover) {
            .choice-btn:hover {
                background: linear-gradient(135deg, rgba(123, 47, 255, 0.2), rgba(0, 255, 200, 0.15));
                border-color: #00ffc8;
                transform: translateX(8px);
                box-shadow: 0 0 30px rgba(0, 255, 200, 0.3);
            }
        }

        .choice-btn:active {
            transform: scale(0.98);
            background: linear-gradient(135deg, rgba(123, 47, 255, 0.3), rgba(0, 255, 200, 0.2));
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background: linear-gradient(145deg, rgba(20, 20, 35, 0.98), rgba(10, 10, 20, 0.99));
            border: 2px solid;
            border-image: linear-gradient(135deg, #00ffc8, #7b2fff, #ff0080) 1;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 0 80px rgba(123, 47, 255, 0.4);
            animation: slideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .modal-content h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #00ffc8, #7b2fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-content p {
            font-size: 1.1em;
            line-height: 1.7;
            margin: 15px 0;
            color: #d0d0e0;
        }

        .modal-btn {
            background: linear-gradient(135deg, #7b2fff, #00ffc8);
            border: none;
            color: #0a0a0f;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 25px;
            margin-top: 25px;
            transition: all 0.3s;
            box-shadow: 0 5px 25px rgba(123, 47, 255, 0.4);
            font-family: inherit;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            touch-action: manipulation;
        }

        .modal-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 35px rgba(0, 255, 200, 0.5);
        }

        #introScreen {
            text-align: center;
        }

        .intro-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 2.5em;
            font-weight: 900;
            background: linear-gradient(135deg, #ff0080, #7b2fff, #00ffc8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            animation: titlePulse 2s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(123, 47, 255, 0.5)); }
            50% { filter: drop-shadow(0 0 40px rgba(0, 255, 200, 0.8)); }
        }

        .intro-story {
            font-size: 1.1em;
            line-height: 2;
            color: #b0b0c0;
            margin-bottom: 30px;
            text-align: left;
            padding: 25px;
            background: rgba(123, 47, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(123, 47, 255, 0.2);
        }

        .name-input-section {
            margin: 30px 0;
        }

        .name-input-section label {
            display: block;
            margin-bottom: 12px;
            color: #00ffc8;
            font-size: 1.1em;
        }

        .name-input {
            width: 100%;
            max-width: 300px;
            padding: 15px 20px;
            font-size: 1.1em;
            border: 2px solid rgba(123, 47, 255, 0.5);
            border-radius: 12px;
            background: rgba(10, 10, 20, 0.8);
            color: #ffffff;
            text-align: center;
            font-family: inherit;
            transition: all 0.3s;
        }

        .name-input:focus {
            outline: none;
            border-color: #00ffc8;
            box-shadow: 0 0 20px rgba(0, 255, 200, 0.3);
        }

        .name-input::placeholder {
            color: #606070;
        }

        .start-btn {
            background: linear-gradient(135deg, #ff0080, #7b2fff);
            border: none;
            color: #ffffff;
            padding: 18px 60px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 30px;
            margin-top: 25px;
            transition: all 0.3s;
            box-shadow: 0 5px 30px rgba(255, 0, 128, 0.4);
            font-family: inherit;
            letter-spacing: 2px;
        }

        .start-btn:hover {
            transform: scale(1.05) translateY(-2px);
            box-shadow: 0 10px 40px rgba(255, 0, 128, 0.6);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .leaderboard-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 0, 128, 0.2);
            border: 1px solid rgba(255, 0, 128, 0.5);
            color: #ff0080;
            padding: 10px 20px;
            font-size: 0.95em;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s;
            font-family: inherit;
            z-index: 10;
        }

        .leaderboard-btn:hover {
            background: rgba(255, 0, 128, 0.3);
            box-shadow: 0 0 20px rgba(255, 0, 128, 0.4);
        }

        .home-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 255, 200, 0.2);
            border: 1px solid rgba(0, 255, 200, 0.5);
            color: #00ffc8;
            padding: 10px 20px;
            font-size: 0.95em;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s;
            font-family: inherit;
            z-index: 10;
            text-decoration: none;
        }

        .home-btn:hover {
            background: rgba(0, 255, 200, 0.3);
            box-shadow: 0 0 20px rgba(0, 255, 200, 0.4);
        }

        .leaderboard-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5em;
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #ff0080, #7b2fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
        }

        .leaderboard-table th {
            padding: 12px;
            text-align: left;
            color: #00ffc8;
            font-weight: 700;
            border-bottom: 2px solid rgba(0, 255, 200, 0.3);
            font-size: 0.9em;
        }

        .leaderboard-table td {
            padding: 12px;
            border-bottom: 1px solid rgba(123, 47, 255, 0.2);
            color: #d0d0e0;
        }

        .leaderboard-table tr:hover td {
            background: rgba(123, 47, 255, 0.1);
        }

        .rank-badge {
            display: inline-block;
            width: 28px;
            height: 28px;
            line-height: 28px;
            text-align: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 0.9em;
        }

        .rank-badge.gold {
            background: linear-gradient(135deg, #ffd700, #ffaa00);
            color: #1a1a1a;
        }

        .rank-badge.silver {
            background: linear-gradient(135deg, #e0e0e0, #a0a0a0);
            color: #1a1a1a;
        }

        .rank-badge.bronze {
            background: linear-gradient(135deg, #cd7f32, #8b4513);
            color: #ffffff;
        }

        .no-records {
            text-align: center;
            color: #606070;
            padding: 30px;
            font-size: 1.1em;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(0, 255, 200, 0.3);
            border-top-color: #00ffc8;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .setup-notice {
            background: rgba(255, 0, 128, 0.1);
            border: 1px solid rgba(255, 0, 128, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #ff9999;
        }

        .setup-notice code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }

        .shock-effect {
            animation: electricShock 0.5s;
        }

        @keyframes electricShock {
            0%, 100% { filter: brightness(1); }
            25% { filter: brightness(2) hue-rotate(90deg); }
            50% { filter: brightness(0.5); }
            75% { filter: brightness(2) hue-rotate(-90deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { 
                transform: translateY(-30px) scale(0.95);
                opacity: 0;
            }
            to { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .success-glow {
            animation: successPulse 1s;
        }

        @keyframes successPulse {
            0%, 100% { box-shadow: 0 0 60px rgba(123, 47, 255, 0.3); }
            50% { box-shadow: 0 0 100px rgba(0, 255, 200, 0.8); }
        }

        .collapse-warning {
            animation: collapseFlash 0.8s ease-in-out;
        }

        @keyframes collapseFlash {
            0%, 100% { background-color: transparent; }
            50% { background-color: rgba(255, 0, 0, 0.2); }
        }

        .danger-text {
            color: #ff4444 !important;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            .floor-display {
                font-size: 2.2em;
            }

            .intro-title {
                font-size: 1.8em;
            }

            .stats-row {
                flex-direction: column;
                gap: 10px;
            }

            .leaderboard-btn, .home-btn {
                position: static;
                margin-bottom: 10px;
                display: inline-block;
            }

            .top-buttons {
                display: flex;
                justify-content: space-between;
                margin-bottom: 20px;
            }

            .leaderboard-table th,
            .leaderboard-table td {
                padding: 8px 5px;
                font-size: 0.85em;
            }
        }

        #gameScreen {
            display: none;
        }

        #leaderboardScreen {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container" id="gameContainer">
        <a href="index.html" class="home-btn">ğŸ  í•™ë…„ ì„ íƒ</a>
        <button class="leaderboard-btn" onclick="showLeaderboard()">ğŸ† ëª…ì˜ˆì˜ ì „ë‹¹</button>

        <!-- ì¸íŠ¸ë¡œ í™”ë©´ -->
        <div id="introScreen">
            <h1 class="intro-title">â³ ì‹œê°„ì˜ ê°ì˜¥</h1>
            <div class="intro-story">
                <p>ğŸ“œ <strong style="color: #ff0080;">[ê¸´ê¸‰ ê²½ë³´]</strong> ì‹œê³µê°„ ë¶•ê´´ ê°ì§€!</p>
                <p>ì‹œê°„ì˜ ìˆ˜í˜¸ìì˜€ë˜ ë‹¹ì‹ ì€ ì—­ì‚¬ ì™œê³¡ ì„¸ë ¥ì˜ í•¨ì •ì— ë¹ ì ¸<br>
                <strong style="color: #7b2fff;">ì§€í•˜ 25ì¸µ ì‹œê°„ì˜ ê°ì˜¥</strong>ì— ê°‡íˆê³  ë§ì•˜ìŠµë‹ˆë‹¤.</p>
                <p>ì´ ê°ì˜¥ì€ ì˜ëª»ëœ ë‹µì„ ì„ íƒí•  ë•Œë§ˆë‹¤ <strong style="color: #ff0080;">ì‹œê³µê°„ ê· ì—´</strong>ì´ í™•ëŒ€ë©ë‹ˆë‹¤.<br>
                ê· ì—´ì´ ì™„ì „íˆ ì—´ë¦¬ë©´... <span style="color: #ff4444;">ì—­ì‚¬ ìì²´ê°€ ì†Œë©¸í•©ë‹ˆë‹¤.</span></p>
                <p style="margin-top: 15px;">ê° ì¸µì˜ <strong style="color: #00ffc8;">ì—­ì‚¬ì˜ ë¬¸</strong>ì„ ì—´ì–´ ì§€ìƒìœ¼ë¡œ íƒˆì¶œí•˜ì„¸ìš”.<br>
                ì˜¤ì§ <strong>ì˜¬ë°”ë¥¸ ì—­ì‚¬ ì§€ì‹</strong>ë§Œì´ ë¬¸ì„ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                <p style="color: #ff0080; font-weight: bold; margin-top: 20px;">âš ï¸ ê²½ê³ : 5ë²ˆì˜ ì˜¤ë‹µ = ì‹œê³µê°„ ì™„ì „ ë¶•ê´´</p>
                <p style="color: #00ffc8;">ğŸ›¡ï¸ B10ì¸µ í†µê³¼ ì‹œ ì•ˆì „ì§€ëŒ€ í™œì„±í™”!</p>
            </div>

            <div class="name-input-section">
                <label for="playerName">ì‹œê°„ ìˆ˜í˜¸ìì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</label>
                <input type="text" id="playerName" class="name-input" placeholder="ì´ë¦„ (2~10ì)" maxlength="10">
            </div>

            <button class="start-btn" onclick="startGame()" id="startBtn">ì‹œê°„ì˜ ê°ì˜¥ íƒˆì¶œ ì‹œì‘</button>
        </div>

        <!-- ê²Œì„ í™”ë©´ -->
        <div id="gameScreen">
            <div class="header">
                <div class="floor-display" id="floorDisplay">B25F</div>
                <div class="era-display" id="eraDisplay">ì¡°ì„  í›„ê¸°</div>
                <div class="timer-display">â±ï¸ <span id="timerDisplay">00:00</span></div>
                <div class="stats-row">
                    <div class="stat-item">
                        <span class="stat-label">ê· ì—´ ìƒíƒœ</span>
                        <span class="stat-value"><span id="mistakeCount">0</span>/5</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ì•ˆì „ì§€ëŒ€</span>
                        <span class="stat-value" id="safeZoneStatus">âŒ</span>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                </div>
            </div>

            <div class="story-box">
                <p class="question" id="question">ë¬¸ì œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                <div class="choices" id="choices"></div>
            </div>
        </div>

        <!-- ë¦¬ë”ë³´ë“œ í™”ë©´ -->
        <div id="leaderboardScreen">
            <h2 class="leaderboard-title">ğŸ† ì‹œê°„ ìˆ˜í˜¸ì ëª…ì˜ˆì˜ ì „ë‹¹</h2>
            <p style="text-align: center; color: #a0a0b0; margin-bottom: 20px;">ì‹œê³µê°„ ë¶•ê´´ë¥¼ ë§‰ê³  ì—­ì‚¬ë¥¼ ì§€ì¼œë‚¸ ì˜ì›…ë“¤</p>
            
            <div id="leaderboardContent">
                <div class="no-records">
                    <span class="loading-spinner"></span> ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                </div>
            </div>

            <div style="text-align: center; margin-top: 25px;">
                <button class="modal-btn" onclick="hideLeaderboard()">ëŒì•„ê°€ê¸°</button>
            </div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div class="modal" id="modal">
        <div class="modal-content" id="modalContent"></div>
    </div>

    <script>
        // ========================================================
        // âš ï¸ ì¤‘ìš”: ì•„ë˜ URLì„ Google Apps Script ì›¹ ì•± URLë¡œ êµì²´í•˜ì„¸ìš”!
        // ìŠ¤í”„ë ˆë“œì‹œíŠ¸: ì‹œê°„ì˜ ê°ì˜¥
        // https://docs.google.com/spreadsheets/d/1tjHyZZbhClVf-y-6rTbVvLodYjdZ6UDOGAj0tWupccI/edit
        // ========================================================
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwelT-H56EcWCROjlmoXH-lqx7BxOsTorqXnEAT8emYh7ukQDInPpDOvCwaopnatys_Ow/exec';
        // ì˜ˆì‹œ: 'https://script.google.com/macros/s/AKfycbw.../exec'
        // ========================================================

        // ========== ìƒˆë¡œìš´ 25ë¬¸í•­ ë¬¸ì œ ë°ì´í„° (3í•™ë…„: ê·¼í˜„ëŒ€ì‚¬ + ì„¸ê³„ì‚¬) ==========
        const originalQuestions = [
            // ğŸŸ¥ ì¡°ì„  í›„ê¸° (B25~B19) - 7ë¬¸í•­
            {
                floor: 25,
                era: "ì¡°ì„  í›„ê¸° - íƒ•í‰ ì •ì¹˜",
                question: "ì˜ì¡°Â·ì •ì¡° ì‹œê¸°ì— ë¶•ë‹¹ ê°„ ëŒ€ë¦½ì„ ì™„í™”í•˜ë ¤ëŠ” ëª©ì ìœ¼ë¡œ ì¶”ì§„ëœ ì •ì¹˜ ìš´ì˜ ì›ë¦¬ëŠ”?",
                choices: ["í™˜êµ­ ì •ì¹˜", "ì„¸ë„ ì •ì¹˜", "íƒ•í‰ ì •ì¹˜", "êµ°ì‚¬ì •ê¶Œ", "ë¶•ë‹¹ ì •ì¹˜"],
                answer: 2
            },
            {
                floor: 24,
                era: "ì¡°ì„  í›„ê¸° - ì¡°ì„¸ ê°œí˜",
                question: "ê³µë‚©ì„ í† ì‚°ë¬¼ ëŒ€ì‹  í† ì§€ ê²°ìˆ˜ì— ë”°ë¼ ìŒ€Â·ë² Â·ë™ì „ ë“±ìœ¼ë¡œ ë‚´ê²Œ í•˜ì—¬ ë°©ë‚©ì˜ íë‹¨ì„ ì¤„ì¸ ì¡°ì„¸ ì œë„ëŠ”?",
                choices: ["ëŒ€ë™ë²•", "ì˜ì •ë²•", "ê· ì—­ë²•", "í˜¸í¬ë²•", "ì§ì „ë²•"],
                answer: 0
            },
            {
                floor: 23,
                era: "ì¡°ì„  í›„ê¸° - ë†ë¯¼ ë´‰ê¸°",
                question: "1811ë…„ì— í‰ì•ˆë„ ì§€ì—­ì—ì„œ ì§€ë°© ì°¨ë³„ê³¼ ìˆ˜íƒˆì— ë°˜ë°œí•´ ë´‰ê¸°í•œ ì‚¬ê±´ì€?",
                choices: ["ì„ìˆ  ë†ë¯¼ ë´‰ê¸°", "ë™í•™ ë†ë¯¼ ìš´ë™", "ê°‘ì‹ ì •ë³€", "ì„ì˜¤êµ°ë€", "í™ê²½ë˜ì˜ ë‚œ"],
                answer: 4
            },
            {
                floor: 22,
                era: "ì¡°ì„  í›„ê¸° - ì™•ê¶Œ ê°•í™”",
                question: "ì •ì¡°ê°€ ì™•ê¶Œ ê°•í™”ë¥¼ ë„ëª¨í•˜ë©° ì •ì¹˜Â·í•™ë¬¸ ìš´ì˜ì˜ ì¤‘ì‹¬ ê¸°êµ¬ë¡œ í™œìš©í•œ ê¸°ê´€ì€?",
                choices: ["ì„±ê· ê´€", "ê·œì¥ê°", "ë¹„ë³€ì‚¬", "í™ë¬¸ê´€", "ìŠ¹ì •ì›"],
                answer: 1
            },
            {
                floor: 21,
                era: "ì¡°ì„  í›„ê¸° - ì‹¤í•™",
                question: "ì¡°ì„  í›„ê¸° ì‹¤í•™ì˜ ì„±ê²©ì„ ê°€ì¥ ì •í™•íˆ ì„¤ëª…í•œ ê²ƒì€?",
                choices: [
                    "ì„±ë¦¬í•™ì˜ êµë¦¬ ì²´ê³„ë¥¼ ë” ì—„ê²©íˆ ì •ë¹„í•œ í•™ë¬¸ì´ë‹¤.",
                    "ë¶ˆêµ ì¤‘ì‹¬ì˜ ì‚¬íšŒ ê°œí˜ì„ ì£¼ì¥í•œ ì‚¬ìƒì´ë‹¤.",
                    "ì‹ ë¶„ì œë¥¼ ìœ ì§€í•œ ì±„ ì™•ê¶Œë§Œ ê°•í™”í•˜ë ¤ëŠ” ì‚¬ìƒì´ë‹¤.",
                    "í˜„ì‹¤ ì‚¬íšŒ ë¬¸ì œ í•´ê²°ì„ ì¤‘ì‹œí•˜ë©° ì œë„Â·ê²½ì œÂ·ê¸°ìˆ  ë“±ì„ ì—°êµ¬í•œ í•™ë¬¸ ê²½í–¥ì´ë‹¤.",
                    "ì™¸ì„¸ ë°°ê²©ë§Œì„ ëª©í‘œë¡œ í•œ ì‚¬ìƒì´ë‹¤."
                ],
                answer: 3
            },
            {
                floor: 20,
                era: "ì¡°ì„  í›„ê¸° - êµ°ì‚¬ ì œë„",
                question: "ì¡°ì„  í›„ê¸° '5êµ°ì˜' ì²´ì œì— í¬í•¨ë˜ì§€ ì•ŠëŠ” êµ°ì‚¬ ì¡°ì§ì€?",
                choices: ["í›ˆë ¨ë„ê°", "ì–´ì˜ì²­", "ê¸ˆìœ„ì˜", "ë³„ê¸°êµ°", "ì´ìœµì²­"],
                answer: 3
            },
            {
                floor: 19,
                era: "ì¡°ì„  í›„ê¸° - ì‹ ë¶„ ë³€ë™",
                question: "ì¡°ì„  í›„ê¸° ì‹ ë¶„ ì§ˆì„œ ë™ìš”ë¥¼ ê°€ì¥ ì§ì ‘ì ìœ¼ë¡œ ë³´ì—¬ ì£¼ëŠ” ì‚¬ë¡€ëŠ”?",
                choices: [
                    "ê³µëª…ì²©ì˜ ë°œê¸‰ìœ¼ë¡œ ì‹ ë¶„ ìƒìŠ¹ í†µë¡œê°€ í™•ëŒ€ë¨",
                    "ê³¼ê±°ì œ íì§€ë¡œ ì‹ ë¶„ì œê°€ ì•½í™”ë¨",
                    "ë…¸ë¹„ì œê°€ ê°•í™”ë˜ì–´ ì‹ ë¶„ ì´ë™ì´ ì°¨ë‹¨ë¨",
                    "ì„œì–¼ì˜ ê´€ì§ ì§„ì¶œì´ ì™„ì „íˆ ê¸ˆì§€ë¨",
                    "ì–‘ë°˜ ìˆ˜ê°€ ê°ì†Œí•˜ì—¬ ìƒë¯¼ì´ ì‚¬ë¼ì§"
                ],
                answer: 0
            },
            // ğŸŸ¨ ê·¼ëŒ€ í•œêµ­ì‚¬ (B18~B11) - 8ë¬¸í•­
            {
                floor: 18,
                era: "ê°œí•­ê¸° - ê°•í™”ë„ ì¡°ì•½",
                question: "ì¡°ì„ ì´ ì¼ë³¸ì˜ ê°•ìš”ë¡œ ì²´ê²°í•˜ì—¬ ë¬¸í˜¸ë¥¼ ê°œë°©í•˜ê²Œ ëœ ì¡°ì•½ì€?",
                choices: ["ì„ì˜¤êµ°ë€", "ê°‘ì‹ ì •ë³€", "ë™í•™ ë†ë¯¼ ìš´ë™", "ì„ì‚¬ëŠ‘ì•½", "ê°•í™”ë„ ì¡°ì•½"],
                answer: 4
            },
            {
                floor: 17,
                era: "ê·¼ëŒ€ - ë™í•™ ë†ë¯¼ ìš´ë™",
                question: "ë™í•™ ë†ë¯¼ ìš´ë™ì˜ ìš”êµ¬ë¡œ ì˜³ì€ ê²ƒì€?",
                choices: ["ê°‘ì˜¤ê°œí˜ ë°˜ëŒ€", "íƒê´€ì˜¤ë¦¬ ì²˜ë²Œê³¼ íì • ê°œí˜", "í•œì¼ ë³‘í•© ì¶”ì§„", "ì™•ì • ë³µê³ ", "ì‹ë¯¼ í†µì¹˜ ìˆ˜ìš©"],
                answer: 1
            },
            {
                floor: 16,
                era: "ì¼ì œê°•ì ê¸° - ì„ì‹œì •ë¶€",
                question: "1919ë…„ 3Â·1 ìš´ë™ì„ ê³„ê¸°ë¡œ ìˆ˜ë¦½ëœ ë…ë¦½ìš´ë™ì˜ ìµœê³  ì§€ë„ ê¸°êµ¬ëŠ”?",
                choices: ["ëŒ€í•œê´‘ë³µíšŒ", "ì˜ì—´ë‹¨", "ëŒ€í•œë¯¼êµ­ ì„ì‹œ ì •ë¶€", "ì‹ ë¯¼íšŒ", "ì‹ ê°„íšŒ"],
                answer: 2
            },
            {
                floor: 15,
                era: "ì¼ì œê°•ì ê¸° - ë¬´ë‹¨ í†µì¹˜",
                question: "ì¼ì œì˜ ë¬´ë‹¨ í†µì¹˜(1910ë…„ëŒ€)ì˜ íŠ¹ì§•ìœ¼ë¡œ ì˜³ì€ ê²ƒì€?",
                choices: [
                    "ì–¸ë¡ Â·ì¶œíŒÂ·ì§‘íšŒ ììœ  í™•ëŒ€",
                    "ë¯¼ì¡± ìì¹˜ í—ˆìš©",
                    "íšŒì‚¬ë ¹ íì§€",
                    "í—Œë²• ì œì •ê³¼ ì˜íšŒ ì„¤ì¹˜",
                    "í—Œë³‘ ê²½ì°° ì¤‘ì‹¬ì˜ ê°•ì•• í†µì¹˜"
                ],
                answer: 4
            },
            {
                floor: 14,
                era: "ì¼ì œê°•ì ê¸° - ë¯¼ì¡± ìš´ë™",
                question: "1927ë…„ì— ê²°ì„±ë˜ì–´ 'ë¯¼ì¡± ìœ ì¼ë‹¹ ìš´ë™' íë¦„ ì†ì—ì„œ í™œë™í•œ ë‹¨ì²´ëŠ”?",
                choices: ["ë…ë¦½í˜‘íšŒ", "ì˜ì—´ë‹¨", "ê´‘ë³µêµ°", "ì‹ ê°„íšŒ", "ëŒ€í•œìê°•íšŒ"],
                answer: 3
            },
            {
                floor: 13,
                era: "ê´‘ë³µê³¼ ë¶„ë‹¨",
                question: "ê´‘ë³µ ì´í›„ 1945ë…„ í•œë°˜ë„ ë¶„ë‹¨ì´ ê³ ì°©ë˜ëŠ” ì¶œë°œì ì´ ëœ ìƒí™©ì€?",
                choices: [
                    "ëª¨ìŠ¤í¬ë°” 3êµ­ ì™¸ìƒ íšŒì˜ ë‹¨ë… ê²°ì •",
                    "ì‹ íƒí†µì¹˜ ì¦‰ì‹œ ì‹œí–‰",
                    "ëŒ€í•œë¯¼êµ­ ì •ë¶€ ìˆ˜ë¦½",
                    "6Â·25 ì „ìŸ ë°œë°œ",
                    "ë¯¸Â·ì†Œì— ì˜í•œ êµ°ì • ì‹¤ì‹œ(38ì„  ê¸°ì¤€ ì ë ¹)"
                ],
                answer: 4
            },
            {
                floor: 12,
                era: "ëŒ€í•œë¯¼êµ­ ìˆ˜ë¦½",
                question: "ëŒ€í•œë¯¼êµ­ ì •ë¶€ ìˆ˜ë¦½ ì´í›„ ì œì •ëœ í—Œë²•ì´ ì±„íƒí•œ êµ­ê°€ í˜•íƒœëŠ”?",
                choices: ["ì™•ì •", "ê³µí™”ì • ë¶€ì •", "ë¯¼ì£¼ ê³µí™”êµ­", "ì‹ë¯¼ì§€ ìì¹˜", "êµ°ì£¼ ì „ì œ"],
                answer: 2
            },
            {
                floor: 11,
                era: "ë¯¼ì£¼í™” ìš´ë™ - 4Â·19",
                question: "4Â·19 í˜ëª…ì˜ ì§ì ‘ì  ê³„ê¸°ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?",
                choices: [
                    "3Â·15 ë¶€ì • ì„ ê±°ì— ëŒ€í•œ í•­ê±°",
                    "6Â·25 ì „ìŸ ë°œë°œ",
                    "10ì›” ìœ ì‹  ì„ í¬",
                    "ì™¸í™˜ ìœ„ê¸°",
                    "5Â·18 ë¯¼ì£¼í™” ìš´ë™"
                ],
                answer: 0
            },
            // ğŸŸ¦ í˜„ëŒ€ í•œêµ­ì‚¬ (B10~B6) - 5ë¬¸í•­
            {
                floor: 10,
                era: "ë¯¼ì£¼í™” - 6ì›” í•­ìŸ",
                question: "1987ë…„ 6ì›” ë¯¼ì£¼ í•­ìŸ ì´í›„ ì œë„ì ìœ¼ë¡œ í™•ì •ëœ ë³€í™”ëŠ”?",
                choices: [
                    "ëŒ€í†µë ¹ ê°„ì„ ì œ ìœ ì§€",
                    "ìœ ì‹  í—Œë²• ë¶€í™œ",
                    "êµ°ë¶€ í†µì¹˜ ê°•í™”",
                    "ëŒ€í†µë ¹ ì§ì„ ì œ ë„ì…(ê°œí—Œ)",
                    "ì‚¬íšŒì£¼ì˜ í—Œë²• ì œì •"
                ],
                answer: 3
            },
            {
                floor: 9,
                era: "ë‚¨ë¶ ê´€ê³„ - UN ê°€ì…",
                question: "ë‚¨ë¶í•œì´ ìœ ì—”(UN)ì— ë™ì‹œ ê°€ì…í•œ í•´ëŠ”?",
                choices: ["1991ë…„", "1995ë…„", "2000ë…„", "1987ë…„", "2007ë…„"],
                answer: 0
            },
            {
                floor: 8,
                era: "í˜„ëŒ€ ê²½ì œ - ì™¸í™˜ ìœ„ê¸°",
                question: "1997ë…„ ì™¸í™˜ ìœ„ê¸° ë‹¹ì‹œ í•œêµ­ ê²½ì œê°€ ê²ªì€ ëŒ€í‘œì  ì¡°ì¹˜ë¡œ ì˜³ì€ ê²ƒì€?",
                choices: [
                    "ì‹ë¯¼ì§€ ê²½ì œ ì²´ì œ ì¬í¸",
                    "ë‚¨ë¶ ê²½ì œ í†µí•©",
                    "êµ­ê°€ ì£¼ë„ì˜ ê³„íš ê²½ì œ ì „í™˜",
                    "ê²½ì œ ë´‰ì‡„ë¡œ ë¬´ì—­ ì¤‘ë‹¨",
                    "êµ­ì œí†µí™”ê¸°ê¸ˆ(IMF) êµ¬ì œê¸ˆìœµ"
                ],
                answer: 4
            },
            {
                floor: 7,
                era: "6Â·25 ì „ìŸ",
                question: "6Â·25 ì „ìŸì˜ ê²°ê³¼ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?",
                choices: [
                    "ë‹¨ì¼ ì •ë¶€ ìˆ˜ë¦½",
                    "ì¼ë³¸ ì‹ë¯¼ í†µì¹˜ ì¬ê°œ",
                    "ìœ ì—” íƒˆí‡´",
                    "ì™•ì • ë³µê³ ",
                    "ë¶„ë‹¨ì˜ ê³ ì°©í™”ì™€ ëƒ‰ì „ êµ¬ì¡° ì‹¬í™”"
                ],
                answer: 4
            },
            {
                floor: 6,
                era: "ë‚¨ë¶ ê´€ê³„ - ì •ìƒ íšŒë‹´",
                question: "2000ë…„ëŒ€ ë‚¨ë¶ ê´€ê³„ ë³€í™”ì˜ ì‚¬ë¡€ë¡œ ì˜³ì€ ê²ƒì€?",
                choices: [
                    "ë‚¨ë¶ UN ë™ì‹œ íƒˆí‡´",
                    "êµ°ì‚¬ ì¶©ëŒì˜ ìƒì‹œí™”ë§Œ ì§€ì†",
                    "ë‚¨ë¶ ì •ìƒ íšŒë‹´ ê°œìµœ(2000, 2007 ë“±)",
                    "í†µì¼ ì •ë¶€ ì¦‰ê° ìˆ˜ë¦½",
                    "ë¶„ë‹¨ì„  íì§€"
                ],
                answer: 2
            },
            // ğŸŸ© ìœ ëŸ½ ì„œì–‘ì‚¬ (B5~B1) - 5ë¬¸í•­
            {
                floor: 5,
                era: "í”„ë‘ìŠ¤ í˜ëª…",
                question: "í”„ë‘ìŠ¤ í˜ëª… ì´í›„ ì‚¬íšŒ ì§ˆì„œ ë³€í™”ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?",
                choices: ["ì™•ê¶Œ ê°•í™”", "ë´‰ê±´ì œ ê°•í™”", "ì‹ë¯¼ì§€ í™•ëŒ€", "ì‹ ë¶„ì œ íì§€", "êµí™©ê¶Œ ê°•í™”"],
                answer: 3
            },
            {
                floor: 4,
                era: "ì‚°ì—… í˜ëª…",
                question: "ì‚°ì—… í˜ëª…ìœ¼ë¡œ ë‚˜íƒ€ë‚œ ì‚¬íšŒ ë³€í™”ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?",
                choices: [
                    "ì¥ì›ì œ ë¶€í™œ",
                    "ë…¸ë™ì ê³„ê¸‰ ì„±ì¥ê³¼ ë„ì‹œí™”",
                    "ë†ë…¸ì œ í™•ëŒ€",
                    "ë†ì—… ì¤‘ì‹¬ ìœ ì§€",
                    "ê·€ì¡± ì •ì¹˜ ê°•í™”"
                ],
                answer: 1
            },
            {
                floor: 3,
                era: "ì œ1ì°¨ ì„¸ê³„ ëŒ€ì „",
                question: "ì œ1ì°¨ ì„¸ê³„ ëŒ€ì „ì˜ ì„±ê²©ì„ ê°€ì¥ ì ì ˆíˆ ì„¤ëª…í•œ ê²ƒì€?",
                choices: [
                    "ì¢…êµ ê°œí˜ ì „ìŸ",
                    "ì ˆëŒ€ ì™•ì • ìˆ˜í˜¸ ì „ìŸ",
                    "ì‹ë¯¼ì§€ ë…ë¦½ ì „ìŸ",
                    "ì œêµ­ì£¼ì˜ êµ­ê°€ ê°„ ì¶©ëŒ",
                    "ëƒ‰ì „ ì‹œì‘"
                ],
                answer: 3
            },
            {
                floor: 2,
                era: "êµ­ì œ ì—°í•©(UN)",
                question: "ë‹¤ìŒ ì¤‘ êµ­ì œì—°í•©(UN)ì˜ íŠ¹ì§•ìœ¼ë¡œ ì˜³ì€ ê²ƒë§Œì„ ëª¨ë‘ ê³ ë¥¸ ê²ƒì€?\n\nã„±. êµ­ì œ í‰í™”ì™€ ì•ˆì „ì˜ ìœ ì§€ê°€ ì£¼ìš” ëª©í‘œì´ë‹¤.\nã„´. ì•ˆì „ë³´ì¥ì´ì‚¬íšŒëŠ” ìƒì„ì´ì‚¬êµ­ì˜ ê±°ë¶€ê¶Œ í–‰ì‚¬ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.\nã„·. ëª¨ë“  ì£¼ìš” ê²°ì •ì´ 'ë§Œì¥ì¼ì¹˜' ì›ì¹™ìœ¼ë¡œë§Œ ì´ë£¨ì–´ì§„ë‹¤.\nã„¹. ì œ2ì°¨ ì„¸ê³„ ëŒ€ì „ ì´í›„ ì°½ì„¤ë˜ì—ˆë‹¤.",
                choices: ["ã„±, ã„·", "ã„´, ã„·", "ã„±, ã„´, ã„·", "ã„·, ã„¹", "ã„±, ã„´, ã„¹"],
                answer: 4
            },
            {
                floor: 1,
                era: "ëƒ‰ì „ ì‹œëŒ€",
                question: "ë‹¤ìŒ ì¤‘ ëƒ‰ì „ì˜ íŠ¹ì§•ì„ ê°€ì¥ ì •í™•íˆ ì„¤ëª…í•œ ê²ƒì€?",
                choices: [
                    "ë¯¸êµ­ê³¼ ì†Œë ¨ì´ ìœ ëŸ½ì—ì„œ ì§ì ‘ ëŒ€ê·œëª¨ ì „ë©´ì „ì„ ë²Œì˜€ë‹¤.",
                    "êµ°ì‚¬ì  ì¶©ëŒì€ ì „í˜€ ì—†ì—ˆê³  ì™¸êµ êµì„­ë§Œ ì¡´ì¬í–ˆë‹¤.",
                    "ì§ì ‘ ì¶©ëŒì€ í”¼í•˜ë©´ì„œë„, ì´ë…Â·êµ°ì‚¬ ë™ë§¹Â·ê²½ì œ ê²½ìŸì´ ì§€ì†ë˜ê³  í•œêµ­ì „ìŸÂ·ë² íŠ¸ë‚¨ì „ìŸ ê°™ì€ 'ëŒ€ë¦¬ì „'ì´ ì „ê°œë˜ì—ˆë‹¤.",
                    "ëƒ‰ì „ì€ ì œ2ì°¨ ì„¸ê³„ ëŒ€ì „ ì´ì „ë¶€í„° í˜•ì„±ëœ ì²´ì œì˜€ë‹¤.",
                    "ëƒ‰ì „ì€ ìœ ëŸ½ ë‚´ë¶€ ë¬¸ì œë¡œë§Œ í•œì •ë˜ì–´ ì•„ì‹œì•„Â·ì•„í”„ë¦¬ì¹´ì™€ ë¬´ê´€í–ˆë‹¤."
                ],
                answer: 2
            }
        ];

        // ========== ê·¹ì ì¸ ìŠ¤í† ë¦¬ ë©”ì‹œì§€ ==========
        const storyMessages = {
            correct: [
                "ì—­ì‚¬ì˜ ë¬¸ì´ ì—´ë ¸ìŠµë‹ˆë‹¤!<br>ì‹œê³µê°„ì´ ì•ˆì •ë˜ê³  ìˆìŠµë‹ˆë‹¤...",
                "ì •í™•í•©ë‹ˆë‹¤!<br>ê· ì—´ì´ ì¡°ê¸ˆì”© ë‹«íˆê³  ìˆì–´ìš”!",
                "í›Œë¥­í•´ìš”!<br>ì—­ì‚¬ì˜ ë¹›ì´ ì–´ë‘ ì„ ë°€ì–´ë‚´ê³  ìˆìŠµë‹ˆë‹¤!",
                "ë§ì•˜ìŠµë‹ˆë‹¤!<br>ì‹œê°„ì˜ ì‚¬ìŠ¬ì´ í•˜ë‚˜ í’€ë ¸ìŠµë‹ˆë‹¤!",
                "ì™„ë²½í•©ë‹ˆë‹¤!<br>ê³¼ê±°ì˜ ê¸°ì–µì´ ë˜ì‚´ì•„ë‚˜ê³  ìˆì–´ìš”!"
            ],
            wrong: [
                "ì¿ ì¿ ì¿µ... ì§€í•˜ ê¹Šì€ ê³³ì—ì„œ ë¬´ì–¸ê°€ê°€ ê¹¨ì–´ë‚˜ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦½ë‹ˆë‹¤...<br>ê· ì—´ì´ ë” ì»¤ì§€ê³  ìˆì–´ìš”!",
                "ì‹œê³µê°„ì— ê¸ˆì´ ê°€ê¸° ì‹œì‘í•©ë‹ˆë‹¤!<br>ì—­ì‚¬ê°€ í”ë“¤ë¦¬ê³  ìˆì–´ìš”!",
                "ê²½ê³ ! ì‹œê°„ì˜ íŒŒë™ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤!<br>í˜„ì‹¤ì´ ì™œê³¡ë˜ê³  ìˆìŠµë‹ˆë‹¤!",
                "ê· ì—´ì—ì„œ ì–´ë‘ ì´ ìƒˆì–´ë‚˜ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...<br>ì„œë‘˜ëŸ¬ì•¼ í•´ìš”!",
                "ì—­ì‚¬ì˜ ì¡°ê°ë“¤ì´ í©ì–´ì§€ê¸° ì‹œì‘í•©ë‹ˆë‹¤!<br>ì •ì‹ ì„ ì°¨ë¦¬ì„¸ìš”!"
            ],
            safeZone: "ğŸ›¡ï¸ ì•ˆì „ì§€ëŒ€ ë„ë‹¬!<br><br>B10ì¸µì„ í†µê³¼í–ˆìŠµë‹ˆë‹¤!<br>ì´ì œë¶€í„° ì˜¤ë‹µì´ ë‚˜ì™€ë„ ì—¬ê¸°ë¡œ ë³µê·€í•©ë‹ˆë‹¤.<br><br>ë‹¹ì‹ ì˜ ì—­ì‚¬ ì§€ì‹ì´ ë³´í˜¸ë§‰ì´ ë˜ì—ˆìŠµë‹ˆë‹¤!",
            gameOver: [
                "ğŸ’€ ì‹œê³µê°„ ì™„ì „ ë¶•ê´´",
                "ê· ì—´ì´ í•œê³„ë¥¼ ë„˜ì–´ì„°ìŠµë‹ˆë‹¤...<br><br>ì¡°ì„ ì˜ ê¸°ë¡ì´ ì‚¬ë¼ì§€ê³ ...<br>ê·¼ëŒ€ì˜ ê¸°ì–µì´ í©ì–´ì§€ê³ ...<br>í˜„ëŒ€ì˜ ì—­ì‚¬ë§ˆì € ë¶•ê´´í•©ë‹ˆë‹¤.<br><br>ë‹¹ì‹ ì€ ì—­ì‚¬ ì†ì—ì„œ ìŠí˜€ì¡ŒìŠµë‹ˆë‹¤..."
            ],
            victory: [
                "ğŸŒŸ ì‹œê°„ì˜ ìˆ˜í˜¸ì ê·€í™˜",
                "ì°¬ë€í•œ ë¹›ì´ ë‹¹ì‹ ì„ ê°ìŒ‰ë‹ˆë‹¤!<br><br>ëª¨ë“  ê· ì—´ì´ ë‹«íˆê³ <br>ì—­ì‚¬ê°€ ì˜¬ë°”ë¥¸ íë¦„ì„ ë˜ì°¾ì•˜ìŠµë‹ˆë‹¤!<br><br>ë‹¹ì‹ ì€ ì§„ì •í•œ ì‹œê°„ì˜ ìˆ˜í˜¸ìì…ë‹ˆë‹¤!"
            ]
        };

        // ========== ì…”í”Œëœ ë¬¸ì œ ë°ì´í„° ==========
        let questions = [];

        // ========== ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ==========
        let currentFloor = 0;
        let mistakes = 0;
        let safeZone = -1;
        let playerName = '';
        let startTime = null;
        let timerInterval = null;
        let isProcessing = false;

        // ========== ì„ íƒì§€ ì…”í”Œ í•¨ìˆ˜ ==========
        function shuffleChoices(questionData) {
            const choices = [...questionData.choices];
            const correctAnswer = choices[questionData.answer];
            
            for (let i = choices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [choices[i], choices[j]] = [choices[j], choices[i]];
            }
            
            const newAnswerIndex = choices.indexOf(correctAnswer);
            
            return {
                ...questionData,
                choices: choices,
                answer: newAnswerIndex
            };
        }

        function shuffleAllQuestions() {
            questions = originalQuestions.map(q => shuffleChoices(q));
        }

        function shuffleQuestionsFromFloor(startIndex) {
            for (let i = startIndex; i < questions.length; i++) {
                questions[i] = shuffleChoices(originalQuestions[i]);
            }
        }

        function isConfigured() {
            return GOOGLE_SCRIPT_URL && GOOGLE_SCRIPT_URL !== 'YOUR_GOOGLE_SCRIPT_URL_HERE';
        }

        function getRandomMessage(type) {
            const messages = storyMessages[type];
            return messages[Math.floor(Math.random() * messages.length)];
        }

        document.getElementById('playerName').addEventListener('input', function() {
            const name = this.value.trim();
            document.getElementById('startBtn').disabled = name.length < 2;
        });

        function startGame() {
            playerName = document.getElementById('playerName').value.trim();
            if (playerName.length < 2) {
                alert('ì´ë¦„ì„ 2ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            shuffleAllQuestions();

            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            
            startTime = Date.now();
            timerInterval = setInterval(updateTimer, 1000);
            
            loadQuestion();
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60).toString().padStart(2, '0');
            const seconds = (elapsed % 60).toString().padStart(2, '0');
            document.getElementById('timerDisplay').textContent = `${minutes}:${seconds}`;
        }

        function loadQuestion() {
            const q = questions[currentFloor];
            const floorNum = q.floor;
            
            document.getElementById('floorDisplay').textContent = `B${floorNum}F`;
            document.getElementById('eraDisplay').textContent = q.era;
            document.getElementById('question').textContent = q.question;
            
            const choicesDiv = document.getElementById('choices');
            choicesDiv.innerHTML = '';
            
            setTimeout(() => {
                q.choices.forEach((choice, index) => {
                    const btn = document.createElement('button');
                    btn.className = 'choice-btn';
                    btn.textContent = `${index + 1}. ${choice}`;
                    
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        if (!isProcessing) {
                            checkAnswer(index);
                        }
                    });
                    
                    choicesDiv.appendChild(btn);
                });
            }, 100);

            const progress = ((25 - currentFloor) / 25) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('mistakeCount').textContent = mistakes;
            document.getElementById('safeZoneStatus').textContent = safeZone !== -1 ? 'âœ…' : 'âŒ';

            if (mistakes >= 3) {
                document.getElementById('mistakeCount').parentElement.classList.add('danger-text');
            }
        }

        function checkAnswer(selected) {
            if (isProcessing) return;
            isProcessing = true;

            const q = questions[currentFloor];
            
            if (selected === q.answer) {
                document.getElementById('gameContainer').classList.add('success-glow');
                
                if (currentFloor === 15) {
                    safeZone = 16;
                    showModal(
                        "ğŸ›¡ï¸ ì•ˆì „ì§€ëŒ€ í™œì„±í™”!",
                        storyMessages.safeZone,
                        () => {
                            isProcessing = false;
                            currentFloor++;
                            if (currentFloor < questions.length) {
                                loadQuestion();
                            } else {
                                showVictory();
                            }
                        }
                    );
                } else {
                    currentFloor++;
                    if (currentFloor < questions.length) {
                        const nextFloor = questions[currentFloor].floor;
                        showModal(
                            "âœ… ì •ë‹µì…ë‹ˆë‹¤!",
                            `${getRandomMessage('correct')}<br><br>â†’ B${nextFloor}Fë¡œ ìƒìŠ¹ ì¤‘...`,
                            () => {
                                isProcessing = false;
                                loadQuestion();
                            }
                        );
                    } else {
                        isProcessing = false;
                        showVictory();
                    }
                }
                
                setTimeout(() => {
                    document.getElementById('gameContainer').classList.remove('success-glow');
                }, 1000);
                
            } else {
                mistakes++;
                document.getElementById('gameContainer').classList.add('shock-effect');
                document.getElementById('gameContainer').classList.add('collapse-warning');
                
                setTimeout(() => {
                    document.getElementById('gameContainer').classList.remove('shock-effect');
                    document.getElementById('gameContainer').classList.remove('collapse-warning');
                }, 500);
                
                if (mistakes >= 5) {
                    isProcessing = false;
                    showGameOver();
                } else {
                    let resetFloor;
                    let resetMessage;
                    
                    if (safeZone !== -1) {
                        resetFloor = safeZone;
                        resetMessage = 'B10F ì•ˆì „ì§€ëŒ€';
                    } else {
                        resetFloor = 0;
                        resetMessage = 'B25F';
                    }
                    
                    const dangerLevel = mistakes >= 3 ? '<span style="color: #ff4444; font-weight: bold;">âš ï¸ ìœ„í—˜!</span> ' : '';
                    
                    showModal(
                        "âš¡ ì‹œê³µê°„ ì¶©ê²©!",
                        `${getRandomMessage('wrong')}<br><br>${dangerLevel}ê· ì—´ ìƒíƒœ: <strong style="color: #ff0080;">${mistakes}/5</strong><br><br>â†’ ${resetMessage}ë¡œ ë³µê·€í•©ë‹ˆë‹¤...`,
                        () => {
                            isProcessing = false;
                            currentFloor = resetFloor;
                            shuffleQuestionsFromFloor(resetFloor);
                            loadQuestion();
                        }
                    );
                }
            }
        }

        function showModal(title, message, callback) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <h2>${title}</h2>
                <p>${message}</p>
                <button class="modal-btn" id="modalBtn">í™•ì¸</button>
            `;
            
            modal.style.display = 'flex';
            
            const modalBtn = document.getElementById('modalBtn');
            modalBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                modal.style.display = 'none';
                if (callback) {
                    setTimeout(callback, 150);
                }
            });
        }

        function showGameOver() {
            clearInterval(timerInterval);
            
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <h2 style="background: linear-gradient(135deg, #ff0080, #ff4444); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">${storyMessages.gameOver[0]}</h2>
                <p>${storyMessages.gameOver[1]}</p>
                <p style="color: #666; font-size: 0.9em;">ì˜¤ë‹µ íšŸìˆ˜: ${mistakes}íšŒ</p>
                <button class="modal-btn" id="resetBtn">ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë„ì „</button>
            `;
            
            modal.style.display = 'flex';
            
            document.getElementById('resetBtn').addEventListener('click', function(e) {
                e.preventDefault();
                resetGame();
            });
        }

        async function showVictory() {
            clearInterval(timerInterval);
            
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timeString = `${minutes}ë¶„ ${seconds}ì´ˆ`;

            await saveToLeaderboard(playerName, elapsed, mistakes);

            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <h2>${storyMessages.victory[0]}</h2>
                <p>${storyMessages.victory[1]}</p>
                <p style="margin-top: 20px;">
                    ì¶•í•˜í•©ë‹ˆë‹¤, <strong style="color: #00ffc8;">${playerName}</strong> ìˆ˜í˜¸ìë‹˜!
                </p>
                <p style="margin-top: 15px;">
                    â±ï¸ íƒˆì¶œ ì‹œê°„: <strong style="color: #00ffc8;">${timeString}</strong><br>
                    ğŸ’” ê· ì—´ ë°œìƒ: <strong style="color: #ff0080;">${mistakes}íšŒ</strong>
                </p>
                <p style="font-size: 0.9em; color: #a0a0b0; margin-top: 15px;">ê¸°ë¡ì´ ëª…ì˜ˆì˜ ì „ë‹¹ì— ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button class="modal-btn" id="retryBtn">ë‹¤ì‹œ ë„ì „</button>
                    <button class="modal-btn" id="leaderboardBtn" style="background: linear-gradient(135deg, #ff0080, #7b2fff);">ëª…ì˜ˆì˜ ì „ë‹¹</button>
                </div>
            `;
            
            modal.style.display = 'flex';
            
            document.getElementById('retryBtn').addEventListener('click', function(e) {
                e.preventDefault();
                resetGame();
            });
            
            document.getElementById('leaderboardBtn').addEventListener('click', function(e) {
                e.preventDefault();
                modal.style.display = 'none';
                showLeaderboard();
            });
        }

        async function saveToLeaderboard(name, timeSeconds, mistakes) {
            if (!isConfigured()) {
                console.warn('Google Script URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: name,
                        time: timeSeconds,
                        mistakes: mistakes
                    })
                });
                console.log('ê¸°ë¡ ì €ì¥ ì™„ë£Œ');
            } catch (error) {
                console.error('ê¸°ë¡ ì €ì¥ ì‹¤íŒ¨:', error);
            }
        }

        async function loadLeaderboard() {
            if (!isConfigured()) {
                return null;
            }

            try {
                const response = await fetch(GOOGLE_SCRIPT_URL);
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('ë¦¬ë”ë³´ë“œ ë¡œë“œ ì‹¤íŒ¨:', error);
                return null;
            }
        }

        async function showLeaderboard() {
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('leaderboardScreen').style.display = 'block';

            const contentDiv = document.getElementById('leaderboardContent');
            
            if (!isConfigured()) {
                contentDiv.innerHTML = `
                    <div class="setup-notice">
                        âš ï¸ Google Sheets ì—°ë™ì´ í•„ìš”í•©ë‹ˆë‹¤.<br><br>
                        HTML íŒŒì¼ì˜ <code>GOOGLE_SCRIPT_URL</code> ê°’ì„<br>
                        Google Apps Script ì›¹ ì•± URLë¡œ êµì²´í•´ì£¼ì„¸ìš”.
                    </div>
                `;
                return;
            }

            contentDiv.innerHTML = '<div class="no-records"><span class="loading-spinner"></span> ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';

            try {
                const leaderboard = await loadLeaderboard();

                if (!leaderboard || leaderboard.length === 0) {
                    contentDiv.innerHTML = '<div class="no-records">ì•„ì§ íƒˆì¶œ ì„±ê³µ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì²« ë²ˆì§¸ ì‹œê°„ ìˆ˜í˜¸ìê°€ ë˜ì–´ë³´ì„¸ìš”! ğŸ¦¸</div>';
                    return;
                }

                let tableHTML = `
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>ìˆœìœ„</th>
                                <th>ìˆ˜í˜¸ì</th>
                                <th>ì‹œê°„</th>
                                <th>ê· ì—´</th>
                                <th>ë‚ ì§œ</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                leaderboard.slice(0, 20).forEach((record, index) => {
                    const rank = index + 1;
                    const minutes = Math.floor(record.time / 60);
                    const seconds = record.time % 60;
                    const timeStr = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    
                    let dateStr = record.date || '-';
                    if (dateStr.includes('/') || dateStr.includes('-')) {
                        try {
                            const d = new Date(dateStr);
                            dateStr = `${d.getMonth()+1}/${d.getDate()}`;
                        } catch (e) {}
                    }

                    let rankBadge = rank;
                    if (rank === 1) rankBadge = '<span class="rank-badge gold">1</span>';
                    else if (rank === 2) rankBadge = '<span class="rank-badge silver">2</span>';
                    else if (rank === 3) rankBadge = '<span class="rank-badge bronze">3</span>';

                    tableHTML += `
                        <tr>
                            <td>${rankBadge}</td>
                            <td>${escapeHTML(record.name)}</td>
                            <td>${timeStr}</td>
                            <td>${record.mistakes}íšŒ</td>
                            <td>${dateStr}</td>
                        </tr>
                    `;
                });

                tableHTML += '</tbody></table>';
                contentDiv.innerHTML = tableHTML;

            } catch (error) {
                console.error('ë¦¬ë”ë³´ë“œ ë¡œë“œ ì‹¤íŒ¨:', error);
                contentDiv.innerHTML = '<div class="no-records">ê¸°ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
            }
        }

        function hideLeaderboard() {
            document.getElementById('leaderboardScreen').style.display = 'none';
            document.getElementById('introScreen').style.display = 'block';
        }

        function escapeHTML(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        function resetGame() {
            currentFloor = 0;
            mistakes = 0;
            safeZone = -1;
            startTime = null;
            isProcessing = false;
            clearInterval(timerInterval);
            
            document.getElementById('modal').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('leaderboardScreen').style.display = 'none';
            document.getElementById('introScreen').style.display = 'block';
            document.getElementById('playerName').value = playerName;
            document.getElementById('startBtn').disabled = playerName.length < 2;
            
            const mistakeEl = document.getElementById('mistakeCount');
            if (mistakeEl && mistakeEl.parentElement) {
                mistakeEl.parentElement.classList.remove('danger-text');
            }
        }

        document.getElementById('startBtn').disabled = true;
    </script>
</body>
</html>
